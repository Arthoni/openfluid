

IF(OFBUILD_TESTS_ENABLE_FORTRAN)

  SET(CMAKE_Fortran_FLAGS_RELEASE "-funroll-all-loops -fno-f2c -O3")

  ADD_LIBRARY(tests.fortran${OPENFLUID_SIMULATORS_SUFFIX} MODULE FortranSim.cpp SbrFortran.f90)
  SET_TARGET_PROPERTIES(tests.fortran${OPENFLUID_SIMULATORS_SUFFIX} 
                        PROPERTIES PREFIX "" SUFFIX "${OPENFLUID_PLUGINS_BINARY_EXTENSION}" 
                        LIBRARY_OUTPUT_DIRECTORY "${OFBUILD_TESTS_BINARY_DIR}")
  TARGET_LINK_LIBRARIES(tests.fortran${OPENFLUID_SIMULATORS_SUFFIX} openfluid-base openfluid-core gfortran)

ENDIF()
